\documentclass[12pt,fleqn]{article}

\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage{amssymb,amsmath,mathrsfs,amsthm}
\usepackage[russian]{babel}
\usepackage{graphicx}
\usepackage[footnotesize]{caption2}
\usepackage{indentfirst}
%\usepackage[ruled,section]{algorithm}
%\usepackage[noend]{algorithmic}
%\usepackage[all]{xy}

% Параметры страницы
\textheight=24cm
\textwidth=16cm
\oddsidemargin=5mm
\evensidemargin=-5mm
\marginparwidth=36pt
\topmargin=-1cm
\footnotesep=3ex
%\flushbottom
\raggedbottom
\tolerance 3000
% подавить эффект "висячих стpок"
\clubpenalty=10000
\widowpenalty=10000
\renewcommand{\baselinestretch}{1.1}
\renewcommand{\baselinestretch}{1.5} %для печати с большим интервалом

\begin{document}

\begin{titlepage}
\begin{center}
    Московский государственный университет имени М. В. Ломоносова

    \bigskip
    \includegraphics[width=50mm]{msu.pdf}

    \bigskip
    Факультет Вычислительной Математики и Кибернетики\\
    Кафедра Автоматизации Систем Вычислительных Комплексов\\[10mm]

    \textsf{\large\bfseries
        ДИПЛОМНАЯ РАБОТА СТУДЕНТА 420 ГРУППЫ\\[10mm]
        Расчёт освещённости при помощи метода излучательности на графических процессорах для интерактивных приложений
    }\\[10mm]

    \begin{flushright}
        \parbox{0.5\textwidth}{
            Выполнил:\\
            студент 4 курса 420 группы\\
            \emph{Щербаков Александр Станиславович}\\[5mm]
            Научный руководитель:\\
            к.ф-м.н.\\
            \emph{Фролов Владимир Александрович}
        }
    \end{flushright}

    \begin{tabular}{p{0.45\textwidth}p{0.45\textwidth}}
        И. о. заведующего кафедрой\newline
        Автоматизации Систем\newline
        Вычислительных Комплексов
        &
        ~\newline~\newline
        \hfill\hbox to 0.45\textwidth{\hrulefill~В. К. Власов}
    \\[20mm]
        К защите допускаю\newline
        \hbox to 0.4\textwidth{<<\hbox to 12mm{\hrulefill}>> \hrulefill~2017 г.}
        &
        К защите рекомендую\newline
        \hbox to 0.45\textwidth{<<\hbox to 12mm{\hrulefill}>> \hrulefill~2017 г.}
    \end{tabular}

    \vspace{\fill}
    Москва, 2017
\end{center}
\end{titlepage}

\newpage
\renewcommand{\contentsname}{Содержание}
\tableofcontents

\newpage
\begin{abstract}
    Данный документ является образцом оформления дипломной работы для студентов кафедры 
    Математических методов прогнозирования ВМК~МГУ. 
    Приведённые ниже рекомендации взяты из~статьи
    <<Написание отчётов и статей (рекомендации)>>
    на~вики"~ресурсе \texttt{www.MachineLearning.ru}.
    Студенты, готовящие дипломную работу к~защите, 
    могут найти много полезной информации также в~статьях 
    <<Научно-исследовательская работа (рекомендации)>>,
    <<Подготовка презентаций (рекомендации)>>,
    <<Защита выпускной квалификационной работы (рекомендации)>>
    на~том~же ресурсе. 

    Аннотация обычно содержит 
    краткое описание постановки задачи и~полученных результатов,
    одним абзацем на 10--15 строк.
    Цель аннотации "--- обозначить в~общих чертах, о~чём работа,
    чтобы человек, совершенно не~знакомый с~данной работой,
    понял, интересна~ли ему эта тема, и~стоит~ли читать дальше.
    Аннотация собирается в~последнюю очередь
    путем легкой модификации наиболее важных и~удачных фраз из введения и~заключения.
\end{abstract}

\newpage
\section{Введение}

\section{Постановка задачи}

\subsection{Неформальная постановка задачи}

Требуется уменьшить вычислительные затраты при расчёте вторичного освещения в~3D-сцене с~динамическими источниками света методом излучательности.

\subsection{Формальная постановка задачи}

Для заданной трёхмерной сцены (геометрия, источники света, материалы) первичным освещением называется освещение исходящее непосредственно из~источников света. Вторичным освещением называется освещение, полученное путём многократного отражения первичного освещения от~поверхностей сцены.

Необходимо, используя данные о~геометрии и~материалах сцены, провести её предобработку. Полученные данные используются во~время отрисовки сцены в~интерактивном режиме с~изменением конфигурации освещения.

Цель работы --- уменьшить время визуализации сцены и~необходимые ресурсы видеопамяти.


\section{Обзор методов расчета вторичного освещения}

\subsection{Instant Radiosity}

Данный метод является одним из~самых популярных методов расчёта вторичного освещения. Для визуализации каждого кадра выполняются следующие шаги:

\begin{enumerate}

\item На~источниках света выбираются точки.

\item Из~выбранных точек трассируются случайные лучи. Лучи отражаются столько раз, сколько отражений света необходимо учесть при визуализации.

\item Каждая из~точек полученных путей является вторичным источником света. Для них производится рендеринг с~целью определить, какие области сцены освещаются источником.

\item В~специальном буффере суммируется вклад вторичных источников света в~освещение каждого пикселя.

\item Полученные значения освещения используются для финальной визуализации.

\end{enumerate}

Развитием метода Instant Radiosity является алгоритм Reflective Shadow Maps. Он отличается способом выбора вторичных источников света. Вместо трассировки происходит создание карты теней для источников света. По~карте теней выбираются вторичные источники как пиксели на~карте. Плотность выбора источников на карте теней и их вес увеличивается с расстоянием до центра карты.

\subsubsection{Достоинства метода}

\begin{enumerate}

\item Этот метод значительно меньших вычислительных затрат по сравнению с остальными современными методами.

\item Не требуется предобработка сцены.

\end{enumerate}

\subsubsection{Недостатки метода}

\begin{enumerate}

\item При недостаточном количестве вторичных источников света метод имеет низкую точность.

\item Требуемые вычисления существенно увеличивается с увеличением количества первичных и вторичных источников света.

\end{enumerate}

\subsection{Light Propagation Volumes}

Этот алгоритм создаёт вторичные источники света так же, как это делается в Instance Radiosity, но расчёт вторичного освещения производится иначе:

\begin{enumerate}

\item На первом шаге создаются регулярная трёхмерная сетка для переноса света и сетка с упрощенным представлением сцены. На последующих итерациях алгоритма сетка с геометрией перестраивается при необходимости.

\item Вторичные источники света используются для инициализации освещения на сетке.

\item Производится перенос света по сетке. В этом процессе учитывается вторая сетка с упрощённой сценой для моделирования отражений.

\item Освещение попавшее на поверхности используется для визуализации финального изображения.

\end{enumerate}

\subsubsection{Достоинства метода}

\begin{enumerate}

\item Позволяет использовать различные эффекты связанные с полупрозрачностью среды.

\item Можно динамически изменять сцену.

\end{enumerate}

\subsubsection{Недостатки метода}

\begin{enumerate}

\item Артефакты связанные с дискретизацией пространства.

\item Недостаточное количество итераций переноса даёт некачественное изображение.

\item Сложность вычислений растёт кубически с увеличением точности сетки.

\end{enumerate}

\subsection{Voxel Cone Tracing}

В методе Voxel Cone Tracing производится сбор освещения падающего на пиксель путём трассировки конусов из этого пикселя. Общую схему алгоритма можно представить следующим образом:

\begin{enumerate}

\item Вначале, создаётся воксельная сетка, в которой хранятся несколько мип-уровней сцены. Для каждого нового кадра можно использовать уже созданную сетку, изменяя её при изменении сцены.

\item Производится расчёт освещения для каждого пикселя. Для этого производится трассировка нескольких конусов из пикселя в разных направлениях. Эти конусы собирают падающую освещённость в направлениях трассировки.

\end{enumerate}

При трассировке конусов происходит активное использование мип-уровней воксельной сетки. При удалении от пикселя данные берутся из мип-уровней с меньшей детадизацией.

\subsubsection{Достоинства метода}

\begin{enumerate}

\item Высокое качество изображения.

\item Поддержка многих материалов поверхностей.

\item Динамическое изменение сцены.

\end{enumerate}

\subsubsection{Недостатки метода}

\begin{enumerate}

\item Артефакты связанные с воксельным приближением сцены.

\item Высокие требования видеопамяти.

\item Большая сложность вычислений.

\end{enumerate}

\subsection{Spherical Harmonics}

Техника сферических гармоник основывается на разложении сложных функций освещенности в сумму более простых для вычисления величин. Изначально такое разложение использовалось в физике для моделирования конфигурации электрона в атоме. Сложная сферическая функция раскладывается по ортонормированному базису. Это один из вариантов трёхмерного разложения функции в ряд Фурье.

Для некоторых точек считаются коэффециенты разложения их функций освещения по базису. При визуализации сферические функции освещения из источников также раскладываются по базису. В итоге вычисление освещения в точке с разложенной в ней функцией освещенности сводится к скалярному произведению векторов состоящих из коэффициентов функции освещённости в данной точке и функции освещения из источника.

\subsubsection{Достоинства метода}

\begin{enumerate}

\item Небольшое количество вычислений при визуализации.

\end{enumerate}

\subsubsection{Недостатки метода}

\begin{enumerate}

\item Для сложных сцен и конфигураций освещения может потребоваться много коэффицентов в разложении функций. Это увеличивает количество необходимых вычислений и количество требуемой памяти.

\item Артефакты связанные с интерполяцией освещения между точками в которых известно разложение функции.

\end{enumerate}

\subsection{Radiosity}

Метод излучательности (Radiosity) позволяет получать наиболее качественные изображения по сравнению с остальными методами. Однако, время выполнения и требуемые ресурсы очень сильно зависят от сцены. На сценах содержащих сотни тысяч или даже миллионы треугольников он непременим. Поэтому на практике алгоритм излучательности выполняется для упрощённой сцены (содержащей меньшее количество площадок) и результат расчёта переносится на исходную сцену.

Одна из наиболее комерчески успешных реализаций этого алгоритма используется в графическом движке "Enlighten". В нём расчёты производятся на центральном процессоре. В виду большого количества вычислений, которые выполняются на процессоре помимо вычисления вторичного освещения, нет возможности обновлять вторичное освещение для каждого кадра. Поэтому посчитанное вторичное освещение используется для следующих 5-10 кадров. В этом движке для сцены нужна её версия упрощённая вручную.

Алгоритм излучательности требует предобработки сцены:

\begin{enumerate}

\item Для сцены происходит её разбиение сцены на площадки (при создании упрощённого аналога вручную также может быть создано разбиение).

\item Считаются форм-факторы для каждой пары площадок.

\end{enumerate}

Форм-фактор --- это число показывающее для пары площадок какая часть энергии пришедшей на первую площадку отразится на вторую.

Для визуализации используются предпосчитанные значения форм-факторов и для каждого кадра выполняется расчёт вторичного освещение методом излучательности:

\begin{enumerate}

\item Вычисляется, либо задаётся значение для начальной светимости площадок. Из этих значений получается вектор начальной светимости.

\item Вектор начальной светимости умножается на матрицу форм-факторов. Таким образом получается вектор освещения пришедшего на площадки.

\item При умножении значений пришедшего освещения на цвета площадок получается вектор светимости после первого отражения.

\item 2 и 3 шаги повторяются на векторов отраженного освещения несколько раз. На каждом шаге накапливается освещение пришедшее на площадку после каждого отражения.

\item Накопленное вторичное освещение отображется на исходной сцене.

\end{enumerate}

\subsubsection{Достоинства метода}

\begin{enumerate}

\item Наиболее близкое к точным методам изображение.

\item Высокая скорость вычислений для небольшого количества площадок.

\end{enumerate}

\subsubsection{Недостатки метода}

\begin{enumerate}

\item Квадратичных рост сложности вычислений и затрат видеопамяти при увеличении количества площадок.

\item Возможны артефакты при некачественном упрощенном аналоге сцены.

\end{enumerate}

\subsection{Обзор литературы}

Лучше, чтобы название этого подраздела было содержательным, 
например, общепринятым названием задачи, проблемы или метода,
рассматриваемого в~данной работе. 

Перечисляются подходы, методы, факты, на которые существенно опирается данная работа, 
но~которые могут быть не~известны широкому кругу читателей.
Здесь ссылки на литературу обязательны. 
Теоремы только формулируются, но не~доказываются.

Данный раздел преследует две цели. 
Во-первых, сделать работу самодостаточной~--- дать необходимый минимум информации тем читателям,
которые не~очень хорошо ориентируются в~теме, но желают поближе познакомиться именно с~данной работой.
Во-вторых, облегчить сопоставление полученных автором результатов с~ранее известными.

\section{Новые подходы и~результаты}

Название этого раздела обязательно надо заменить на~содержательное. 
В~этом разделе, как правило, много подразделов. 

В~дипломной работе не~стоит делать более двух уровней,
достаточно разделов и~подразделов.
Будете писать диссертацию или монографию~--- сделаете три уровня. 
  
\section{Вычислительные эксперименты}

Цель данного раздела:
продемонстрировать, что предложенная теория работает на практике;
показать границы её применимости;
рассказать о~новых экспериментальных фактах.

Чисто теоретические работы могут вообще не~содержать раздела экспериментов
(не~работает, ну и~не~надо~--- зато теория красивая).
Кстати, теоретики имеют право не~догадываться, где, кому и~когда их теории пригодятся.

\subsection{Исходные данные и~условия эксперимента}
Описывается прикладная задача, параметры анализируемых данных 
(например, сколько объектов, сколько признаков, каких они типов), 
параметры эксперимента 
(например, как производился скользящий контроль). 

\subsection{Результаты эксперимента}
Результаты экспериментов представляются в~виде таблиц и~графиков. 
Объясняется точный смысл всех обозначений на графиках, строк и~столбцов в~таблицах. 

\subsection{Обсуждение и~выводы}
Приводятся выводы: 
в~какой степени результаты экспериментов согласуются с~теорией? 
Достигнут ли желаемый результат? 
Обнаружены ли какие-либо факты, не~нашедшие объяснения, и~которые нельзя списать на «грязный» эксперимент?

Обсуждаются основные отличия предложенных методов от известных ранее. 
В~чем их преимущества? 
Каковы границы их применимости? 
Какие проблемы удалось решить, а~какие остались открытыми? 
Какие возникли новые постановки задач?

\section{Заключение}

В~квалификационных работах последний раздел нужен для того, чтобы 
конспективно перечислить основные результаты, полученные лично автором. 

Результатами, в~частности, являются:
\begin{itemize}
\item 
    Предложен новый подход к\dots
\item 
    Разработан новый метод\dots, позволяющий\dots
\item 
    Доказан ряд теорем, подтверждающих (опровергающих), что\dots
\item 
    Проведены вычислительные эксперименты\dots,
    которые подтвердили / опровергли / привели к~новым постановкам задач.
\end{itemize}
    
Цель данного раздела: доказать квалификацию автора. 
Даже беглого взгляда на заключение должно быть достаточно, чтобы стало ясно: 
автору удалось решить актуальную, трудную, ранее не~решённую задачу, 
предложенные автором решения обоснованы и~проверены.

Иногда в~Заключении приводится список направлений дальнейших исследований.

\newpage
Список литературы необходим в~любой научной публикации. 
В дипломной работе он~обязателен. 
Дурным тоном считается:
ссылаться на работы только одного-двух авторов (например, себя или шефа);
ссылаться на слишком малое число работ;
ссылаться только на очень старые работы;
ссылаться на работы, которых автор ни разу не видел;
ссылаться на~работы, которые не~упоминаются в~тексте
или которые не~имеют отношения к~данному тексту.

\renewcommand{\bibname}{Список литературы}
\addcontentsline{toc}{section}{\bibname}

\nocite{hastie09elements,bishop06pattern,zhuravlev06recognition,zhuravlev78prob33,shlezinger04ten,boucheron05theory}

\def\BibUrl#1.{}\def\BibAnnote#1.{}
%\def\BibUrl#1{\\{\footnotesize\tt\def~{\char126} http://#1}}
\bibliographystyle{gost71s}
\bibliography{MachLearn}

\end{document}
